<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Battleship AI reasoner dev</title>
        <style>

            body {
                font-family: 'Courier';
            }

        </style>
    </head>
    <body>
        <!-- JS vendors -->
        <script type="text/javascript" src="js/vendors/jquery-2.1.1.min.js"></script>
        <!-- JS own -->
        <!-- reasoner -->
        <script type="text/javascript" src="js/model/player/bots/reasoner/util.js"></script>
        <script type="text/javascript" src="js/model/player/bots/reasoner/ReasonerWeighting.js"></script>
        <script type="text/javascript" src="js/model/player/bots/reasoner/Reasoner.js"></script>
        <script type="text/javascript" src="js/model/player/bots/reasoner/Graph.js"></script>
        <script type="text/javascript" src="js/model/player/bots/reasoner/Node.js"></script>
        <script type="text/javascript" src="js/model/player/bots/reasoner/GraphmlExporter.js"></script>
        <script type="text/javascript" src="js/model/player/bots/reasoner/temp/Field.js"></script>

        <script>

            testReasoner();

            function testReasoner(){

                /*
                [ ][=][=][=][ ][.]
                [#][ ][~][ ][ ][ ]
                [ ][ ][ ][ ][ ][x]
                [*][ ][ ][ ][~][ ]

                ships: 3,2,2,1
                */
                /*
                var shipTypes = [new ShipType(1, 'black', 1), new ShipType(3, 'orange', 1), new ShipType(2, 'lime', 2)];
                var testfield = new Field(4, 6);
                testfield.cells[0][1] = Cell.DESTROYED;
                testfield.cells[0][2] = Cell.DESTROYED;
                testfield.cells[0][3] = Cell.DESTROYED;
                testfield.cells[0][5] = Cell.FIRED;
                testfield.cells[1][0] = Cell.WAVE_RADIATION;
                testfield.cells[1][2] = Cell.WAVE;
                testfield.cells[2][5] = Cell.HIT;
                testfield.cells[3][0] = Cell.RADIATION;
                testfield.cells[3][4] = Cell.WAVE;
                */

                var shipTypes = [new ShipType(3, 'orange', 1), new ShipType(2, 'orange', 1), new ShipType(1, 'black', 1)];
                var testfield = new Field(4, 4);


                testfield.cells[0][0] = Cell.HIT;
                testfield.cells[1][0] = Cell.HIT;

                testfield.cells[2][2] = Cell.WAVE_RADIATION;
                testfield.cells[0][2] = Cell.WAVE;

                var reasoner = new Reasoner(shipTypes);
                var leaves = reasoner.loadField(testfield);

                console.log('leaves in graph: ' + leaves);

                console.log('inputfield:\n' + testfield + '\nships: ' + reasoner.allShips);// + '\n\npossible setups:\n\n');
                reasoner.graph.showLeaves();

                if(leaves == 1){ //TODO leaves  == 0 error
                    console.log('position of all ships is known, now shooting remaining ship-positions:');
                    console.log(reasoner.graph.getLeaves()[0].field.getRemainingTargetPos(testfield));
                  }
                else
                    reasoner.generateScenarios();

                //reasoner.graph.export();
            }

        </script>

    </body>
</html>
